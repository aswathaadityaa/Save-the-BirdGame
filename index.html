<html>
  <head>
    <title>Help the BIRD</title>
    <style>
      body {
        background-color: #65c2af;
        background-image: url("homeScreenImage.jpg");
        background-repeat: no-repeat;
        background-position: center;
        background-position-y: 100%;
        background-size: 40%;
        margin: 0%;
      }

      @font-face {
        font-family: cloudy;
        src: url(Eracake.ttf);
      }

      .heading {
        font-family: cloudy;
        color: #ffffff;
        font-size: 50px;
        text-align: center;
        margin-top: 3%;
      }

      .startButton {
        margin-top: 33%;
        background-color: #ffffff;
        font-family: cloudy;
        border: #ffffff;
        color: #65c2af;
        padding: 15px;
        font-size: large;
        border-radius: 10px;
        cursor: pointer;
      }
      .checkButton {
        background-color: #65c2af;
        font-family: cloudy;
        border: #ffffff;
        color: white;
        padding: 15px;
        font-size: large;
        border-radius: 10px;
        align-items: center;
        cursor: pointer;
      }
      .middle {
        justify-content: center;
        display: flex;
      }
      .resetButton {
        display: none;
        margin-top: 33%;
        background-color: #ffffff;
        font-family: cloudy;
        border: #ffffff;
        color: #65c2af;
        padding: 15px;
        font-size: large;
        border-radius: 10px;
        cursor: pointer;
      }
      .homeButton {
        display: none;
        margin-top: 33%;
        background-color: #ffffff;
        font-family: cloudy;
        border: #ffffff;
        color: #65c2af;
        padding: 15px;
        font-size: large;
        border-radius: 10px;
        cursor: pointer;
      }
      .question {
        display: none;
        margin-top: 80;
        height: 70%;
        flex-direction: column;
        border-top-right-radius: 20px;
        border-bottom-right-radius: 20px;
        width: 28%;
        align-items: center;
        justify-content: center;
        position: absolute;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue",
          sans-serif;
      }
      .randomTextDisplay {
        display: inline-grid;
        grid-template-columns: auto auto auto;
        gap: 25px 45px;
        align-items: center;
        font-size: large;
        font-family: cloudy;
        color: #ffffff;
        text-align: center;
      }
      .randomTextDisplay div {
        padding: 20px;
        border-radius: 20%;
        background-color: #5dcdfc;
      }
      input {
        --char-w: 1ch;
        --gap: calc(0.5 * var(--char-w));
        display: block;
        margin: auto;
        border: none;
        padding: 0;
        background: repeating-linear-gradient(
            90deg,
            dimgrey 0,
            dimgrey var(--char-w),
            transparent 0,
            transparent calc(var(--char-w) + var(--gap))
          )
          0 100% / calc(100% - var(--gap)) 2px no-repeat;
        font: 5ch "Droid Sans Mono", Consolas, monospace;
        letter-spacing: var(--gap);
        width: fit-content;
      }

      input:focus {
        outline: none;
        color: black;
      }

      .whiteBoxRight {
        background-color: #ffffff;
        margin-top: 50;
        height: 70%;
        width: 28%;
        position: absolute;
        right: 0;
        top: 80;
        flex-direction: column;
        border-top-left-radius: 20px;
        border-bottom-left-radius: 20px;
        display: none;
        justify-content: center;
        align-items: center;
        font-size: 20px;
        color: #000000;
        text-align: center;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue",
          sans-serif;
      }
      .containerBox {
        display: inline-grid;
        grid-template-columns: auto auto auto auto auto;
        gap: 15px 15px;
        align-items: center;
        justify-content: center;
        position: absolute;
        box-sizing: border-box;
        width: 300px;
        height: auto;
        text-align: center;
      }
      .correctAnswer {
        text-align: center;
        align-items: center;
        justify-content: center;
        border-radius: 20%;
        background-color: #5dcdfc;
      }
      .correctAnswer,
      .wrongAnswer {
        width: 60px;
        height: 60px;
        padding: 15px;
        text-align: center;
        border-radius: 20%;
        box-sizing: border-box;
        justify-content: center;
      }

      .randomTextButton {
        display: grid;
        margin-top: 33%;
        background-color: #5dcdfc;
        font-family: cloudy;
        border: #ffffff;
        color: #ffffff;
        padding: 10px;
        font-size: large;
        border-radius: 10px;
        cursor: pointer;
      }

      .correctAnswer {
        width: 60px;
        height: 60px;
        color: #ffffff;
        padding: 15px;
        text-align: center;
      }
      .rightboxHeading {
        position: absolute;
        top: 0%;
        left: 10%;
      }
      .rightboxTimmer {
        position: absolute;
        top: 10%;
        left: 10%;
      }
      .leftStory {
        position: absolute;
        top: 12%;
        left: 32%;
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        font-size: larger;

        color: black;
      }
    </style>
  </head>
  <body>
    <div class="question" id="question">
      <h4 style="text-align: center" id="title"></h4>
      <div class="randomTextDisplay , middle" id="randomTextDisplay"></div>
      <div id="inputword"></div>
      <br />
      <div id="check" class="middle"></div>
      <div id="answerDisplay"></div>
    </div>

    <div class="heading">
      <p>Help the BIRD</p>

      <button
        onclick="generateWord() ,  containerBox(0);"
        id="startButton"
        class="startButton"
      >
        Start
      </button>

      <button onclick="resetWord()" id="resetButton" class="resetButton">
        Reset
      </button>
      <button onclick="home()" id="homeButton" class="homeButton">Home</button>
    </div>
    <p class="leftStory">
      Help me to Escape from the cage by Jumbling the words
    </p>
    <div class="whiteBoxRight" id="rightBox">
      <div id="attempted"></div>
      <div id="timer"></div>
      <div class="containerBox" id="containerBox"></div>
    </div>
  </body>
</html>

<script>
  let counter = 0;
  let totalCounter = 1;
  let title = document.getElementById("title");
  let inputword = document.getElementById("inputword");
  let textDisplay = document.getElementById("randomTextDisplay");
  let attempted = document.getElementById("attempted");
  let timerInterval;
  const arr = [
    ["Pets", "cat", "dog", "fish", "frog"],
    ["Animals", "lion", "bear", "deer", "zebra", "bat"],
    ["Food", "pizza", "bread", "rice", "cake", "fries"],
    ["Countries", "india", "china", "nepal", "italy", "japan"],
    ["Sports", "hockey", "tennis", "golf", "chess", "cricket"],
    ["Festivals", "holi", "eid", "diwali", "onam", "pongal"],
    ["Fruits", "apple", "mango", "grape", "pear", "plum"],
    ["Vegetables", "carrot", "corn", "peas", "onion", "tomato"],
    ["Cities", "delhi", "pune", "paris", "tokyo", "miami"],
    ["Languages", "hindi", "tamil", "telugu", "english", "french"],
    ["Flowers", "rose", "lily", "lotus", "daisy", "tulip"],
    ["Music instruments", "drum", "flute", "piano", "harp", "tabla"],
    ["Drinks", "juice", "water", "milk", "tea", "soda"],
    ["Vehicles", "car", "bus", "bike", "jeep", "van"],
  ];

  const element = document.getElementById("timer");
  const container = document.getElementById("containerBox");
  let arrNum = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
  function containerBox(endValue) {
    attempted.innerHTML = `<h4 class="rightboxHeading">Attempted ${endValue}/10</h4>`;
    container.innerHTML = "";
    for (let i = 0; i < endValue; i++) {
      container.innerHTML += `<p class="correctAnswer style="background-color:#5dcdfc" > ${arrNum[i]}</p>`;
    }
    for (let i = endValue; i < 10; i++) {
      container.innerHTML += `<p class = "wrongAnswer" style="background-color:#b5b5b5" > ${arrNum[i]}</p>`;
    }
  }

  function home() {
    document.getElementById("startButton").style.display = "inline";
    document.getElementById("resetButton").style.display = "none";
    document.getElementById("question").style.display = "none";
    document.getElementById("homeButton").style.display = "none";
    document.getElementById("rightBox").style.display = "none";
    clearInterval(timerInterval);
    textDisplay.innerHTML = "";
    answerDisplay.innerHTML = "";
    totalCounter = 1;
    element.innerHTML = "";
  }

  function generateWord() {
    clearInterval(timerInterval);

    // timer function
    let clock = 30;

    timerInterval = setInterval(function () {
      if (clock < 0) {
        Checker(word);
        clock = 30;
        return;
      }
      if (clock < 6)
        element.innerHTML = `<h4  class="rightboxTimmerAlert">Time Left : ${clock--}</h4>`;
      element.innerHTML = `<h4  class="rightboxTimmer">Time Left : ${clock--}</h4>`;
    }, 1000);

    document.getElementById("startButton").style.display = "none";
    document.getElementById("resetButton").style.display = "inline";
    document.getElementById("homeButton").style.display = "inline";
    document.getElementById("question").style.display = "flex";
    document.getElementById("question").style.backgroundColor = "#ffffff";
    document.getElementById("rightBox").style.display = "flex";

    textDisplay.innerHTML = "";
    inputword.innerHTML = "";

    const randomIndex = Math.floor(arr.length * Math.random());
    const randomIndexWord = Math.floor(
      Math.random() * (arr[randomIndex].length - 1) + 1
    );

    let word = arr[randomIndex][randomIndexWord];
    title.innerHTML = `Rearrange to form the word related to ${arr[randomIndex][0]}<br><br>`;
    inputword.innerHTML = `<br><input autocomplete="off" type="text"  id="dynamicDashInput" maxlength='${word.length}'>`;

    let AllLettersArray = word.split("");
    AllLettersArray = suffleLetters(AllLettersArray);

    // Add scrambled letters to the textDisplay
    for (let i = 0; i < AllLettersArray.length; i++) {
      textDisplay.innerHTML += `<button onclick="call(this)" class="randomTextButton">${AllLettersArray[i]}</button>`;
    }

    const input = document.getElementById("dynamicDashInput");

    function updateInputWidth() {
      const maxLength = input.getAttribute("maxlength");
      input.style.width = `calc(${maxLength} * (1ch + 0.5ch))`;
    }

    updateInputWidth();
    input.addEventListener("input", updateInputWidth);
    check.innerHTML = `<button class="checkButton" id="enteredValue" onclick="Checker('${word}')">Submit</button>`;
  }

  function Checker(word) {
    let enteredValue = document.getElementById("dynamicDashInput");
    let userWord = enteredValue.value.toLowerCase();
    totalCounter++;
    containerBox(totalCounter - 1);
    if (userWord === word) {
      counter++;
      if (totalCounter > 10) {
        alert("Game Over! Your score is " + counter);
        home();
      }
      nextQuestion();
    } else {
      if (totalCounter > 10) {
        alert("Game Over! Your score is " + counter);
        home();
      }
      nextQuestion();
    }
  }

  function suffleLetters(AllLettersArray) {
    for (let i = 0; i < AllLettersArray.length; i++) {
      let j = Math.floor(Math.random() * AllLettersArray.length);
      let temp = AllLettersArray[i];
      AllLettersArray[i] = AllLettersArray[j];
      AllLettersArray[j] = temp;
    }
    return AllLettersArray;
  }

  function nextQuestion() {
    textDisplay.innerHTML = "";
    answerDisplay.innerHTML = "";
    generateWord();
  }

  function resetWord() {
    clearInterval(timerInterval);
    textDisplay.innerHTML = "";
    answerDisplay.innerHTML = "";
    containerBox(0);
    totalCounter = 1;
    generateWord();
  }

  function call(button) {
    let inputField = document.getElementById("dynamicDashInput");
    if (inputField.value.length < inputField.maxLength) {
      inputField.value += button.innerText;
    }
  }
</script>
